import t,{createContext as n,useReducer as e,useContext as r}from"react";function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function u(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){i(t,n,e[n])})}return t}function o(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(t,n){var e=t.items.findIndex(function(t){return t.sku===n.payload.sku});if(e>-1){var r=o(t.items);return r[e].quantity+=n.payload.quantity,r}return[].concat(o(t.items),[n.payload])},c=function(t,n){return t.items.reduce(function(t,e){if(e.sku===n.payload.sku){var r=e.quantity-n.payload.quantity;return r>0?[].concat(o(t),[u({},e,{quantity:r})]):o(t)}return[].concat(o(t),[e])},[])},f=function(t,n){return t.items.filter(function(t){return t.sku!==n.payload.sku})},l=function(t,n){switch(n.type){case"ADD_ITEM":return{items:a(t,n)};case"REMOVE_ITEM":return{items:c(t,n)};case"REMOVE_LINE_ITEM":return{items:f(t,n)};case"CLEAR_CART":return{items:[]}}},s=n(),y=function(n){var r,i=n.children,u=n.initialCart,o=function(t){if(Array.isArray(t))return t}(r=e(l,{items:void 0===u?[]:u}))||function(t,n){var e=[],r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),2!==e.length);r=!0);}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return e}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),a=o[0],c=o[1],f=a.items.reduce(function(t,n){return t+n.quantity},0);return t.createElement(s.Provider,{value:{items:a.items,lineItemsCount:a.items.length,itemsCount:f,addItem:function(t){c({type:"ADD_ITEM",payload:{sku:t,quantity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}})},removeItem:function(t){c({type:"REMOVE_ITEM",payload:{sku:t,quantity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}})},removeLineItem:function(t){c({type:"REMOVE_LINE_ITEM",payload:{sku:t}})},clearCart:function(){c({type:"CLEAR_CART"})},isInCart:function(t){return a.items.some(function(n){return n.sku===t})}}},i)},m=function(){return r(s)};export{y as CartProvider,m as useCart};
//# sourceMappingURL=use-cart.esm.js.map
