{"version":3,"file":"use-cart.esm.js","sources":["../src/reducer.js","../src/use-cart.js"],"sourcesContent":["const addItemReducer = (state, action) => {\n  const existingItemIndex = state.items.findIndex(\n    item => item.sku === action.payload.sku\n  )\n\n  if (existingItemIndex > -1) {\n    const newState = [...state.items]\n    newState[existingItemIndex].quantity += action.payload.quantity\n    return newState\n  }\n  return [...state.items, action.payload]\n}\n\nconst removeItemReducer = (state, action) => {\n  return state.items.reduce((acc, item) => {\n    if (item.sku === action.payload.sku) {\n      const newQuantity = item.quantity - action.payload.quantity\n\n      return newQuantity > 0\n        ? [...acc, { ...item, quantity: newQuantity }]\n        : [...acc]\n    }\n    return [...acc, item]\n  }, [])\n}\n\nconst removeLineItemReducer = (state, action) => {\n  return state.items.filter(item => item.sku !== action.payload.sku)\n}\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_ITEM\":\n      return { items: addItemReducer(state, action) }\n    case \"REMOVE_ITEM\":\n      return { items: removeItemReducer(state, action) }\n    case \"REMOVE_LINE_ITEM\":\n      return { items: removeLineItemReducer(state, action) }\n    case \"CLEAR_CART\":\n      return { items: [] }\n  }\n}\n","import React, { useReducer, useContext, createContext } from \"react\"\nimport { reducer } from \"./reducer\"\nconst CartContext = createContext()\n\nexport const CartProvider = ({ children, initialCart = [] }) => {\n  const [state, dispatch] = useReducer(reducer, { items: initialCart })\n\n  const addItemHandler = (sku, quantity = 1) => {\n    dispatch({ type: \"ADD_ITEM\", payload: { sku, quantity } })\n  }\n\n  const removeItemHandler = (sku, quantity = 1) => {\n    dispatch({ type: \"REMOVE_ITEM\", payload: { sku, quantity } })\n  }\n\n  const getItemsCount = state.items.reduce(\n    (acc, item) => acc + item.quantity,\n    0\n  )\n\n  const removeLineItemHandler = sku => {\n    dispatch({ type: \"REMOVE_LINE_ITEM\", payload: { sku } })\n  }\n\n  const clearCartHandler = () => {\n    dispatch({ type: \"CLEAR_CART\" })\n  }\n\n  const isInCartHandler = sku => {\n    return state.items.some(item => item.sku === sku)\n  }\n\n  return (\n    <CartContext.Provider\n      value={{\n        items: state.items,\n        lineItemsCount: state.items.length,\n        itemsCount: getItemsCount,\n        addItem: addItemHandler,\n        removeItem: removeItemHandler,\n        removeLineItem: removeLineItemHandler,\n        clearCart: clearCartHandler,\n        isInCart: isInCartHandler\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  )\n}\n\nexport const useCart = () => useContext(CartContext)\n"],"names":["addItemReducer","state","action","existingItemIndex","items","findIndex","item","sku","payload","newState","quantity","removeItemReducer","reduce","acc","newQuantity","removeLineItemReducer","filter","reducer","type","CartContext","createContext","CartProvider","children","initialCart","useReducer","dispatch","getItemsCount","React","Provider","value","lineItemsCount","length","itemsCount","addItem","removeItem","removeLineItem","clearCart","isInCart","some","useCart","useContext"],"mappings":"01BAAA,IAAMA,EAAiB,SAACC,EAAOC,OACvBC,EAAoBF,EAAMG,MAAMC,UACpC,SAAAC,UAAQA,EAAKC,MAAQL,EAAOM,QAAQD,SAGlCJ,GAAqB,EAAG,KACpBM,IAAeR,EAAMG,cAC3BK,EAASN,GAAmBO,UAAYR,EAAOM,QAAQE,SAChDD,oBAEER,EAAMG,QAAOF,EAAOM,WAG3BG,EAAoB,SAACV,EAAOC,UACzBD,EAAMG,MAAMQ,OAAO,SAACC,EAAKP,MAC1BA,EAAKC,MAAQL,EAAOM,QAAQD,IAAK,KAC7BO,EAAcR,EAAKI,SAAWR,EAAOM,QAAQE,gBAE5CI,EAAc,cACbD,SAAUP,GAAMI,SAAUI,QAC1BD,qBAECA,IAAKP,KACf,KAGCS,EAAwB,SAACd,EAAOC,UAC7BD,EAAMG,MAAMY,OAAO,SAAAV,UAAQA,EAAKC,MAAQL,EAAOM,QAAQD,OAGnDU,EAAU,SAAChB,EAAOC,UACrBA,EAAOgB,UACR,iBACI,CAAEd,MAAOJ,EAAeC,EAAOC,QACnC,oBACI,CAAEE,MAAOO,EAAkBV,EAAOC,QACtC,yBACI,CAAEE,MAAOW,EAAsBd,EAAOC,QAC1C,mBACI,CAAEE,MAAO,MCrChBe,EAAcC,IAEPC,EAAe,kBAAGC,IAAAA,aAAUC,0DACbC,EAAWP,EAAS,CAAEb,iBADK,gVAC9CH,OAAOwB,OAURC,EAAgBzB,EAAMG,MAAMQ,OAChC,SAACC,EAAKP,UAASO,EAAMP,EAAKI,UAC1B,UAgBAiB,gBAACR,EAAYS,UACXC,MAAO,CACLzB,MAAOH,EAAMG,MACb0B,eAAgB7B,EAAMG,MAAM2B,OAC5BC,WAAYN,EACZO,QA/BiB,SAAC1B,GACtBkB,EAAS,CAAEP,KAAM,WAAYV,QAAS,CAAED,IAAAA,EAAKG,gEADP,MAgClCwB,WA5BoB,SAAC3B,GACzBkB,EAAS,CAAEP,KAAM,cAAeV,QAAS,CAAED,IAAAA,EAAKG,gEADP,MA6BrCyB,eApBwB,SAAA5B,GAC5BkB,EAAS,CAAEP,KAAM,mBAAoBV,QAAS,CAAED,IAAAA,MAoB5C6B,UAjBmB,WACvBX,EAAS,CAAEP,KAAM,gBAiBbmB,SAdkB,SAAA9B,UACfN,EAAMG,MAAMkC,KAAK,SAAAhC,UAAQA,EAAKC,MAAQA,OAgB1Ce,IAKMiB,EAAU,kBAAMC,EAAWrB"}